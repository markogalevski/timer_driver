<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Timer Driver: /home/marko/Documents/embedded_workspace/timer_driver/timer_stm32f411.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Timer Driver
   &#160;<span id="projectnumber">Version 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('timer__stm32f411_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">/home/marko/Documents/embedded_workspace/timer_driver/timer_stm32f411.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Microcontroller specific implementation of timer functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="timer__interface_8h_source.html">timer_interface.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer__cc__interface_8h_source.html">timer_cc_interface.h</a>&quot;</code><br />
<code>#include &quot;stm32f411xe.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for timer_stm32f411.c:</div>
<div class="dyncontent">
<div class="center"><img src="timer__stm32f411_8c__incl.png" border="0" usemap="#_2home_2marko_2_documents_2embedded__workspace_2timer__driver_2timer__stm32f411_8c" alt=""/></div>
<map name="_2home_2marko_2_documents_2embedded__workspace_2timer__driver_2timer__stm32f411_8c" id="_2home_2marko_2_documents_2embedded__workspace_2timer__driver_2timer__stm32f411_8c">
<area shape="rect" id="node2" href="timer__interface_8h.html" title="General interface covering user accesses to a timer&#39;s timebase functionality. " alt="" coords="86,191,204,218"/>
<area shape="rect" id="node6" href="timer__cc__interface_8h.html" title="General interface covering user accesses to a timer&#39;s capture and compare functionality. " alt="" coords="131,109,271,136"/>
<area shape="rect" id="node3" href="timer__stm32f411__config_8h.html" title="Microcontroller specific header containing typedefs for all relevant config options. " alt="" coords="174,273,346,300"/>
<area shape="rect" id="node7" href="timer__cc__stm32f411__config_8h.html" title="Chip specific header containing requisite enums and structs for proper configuration. " alt="" coords="267,184,407,225"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1e855e5068e026d91c42c5b7fce0b591"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__stm32f411_8c.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init</a> (<a class="el" href="structtimer__config__t.html">timer_config_t</a> *config_table)</td></tr>
<tr class="separator:a1e855e5068e026d91c42c5b7fce0b591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ad366bfcfa0fd57f57b3a10e164052"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__stm32f411_8c.html#af9ad366bfcfa0fd57f57b3a10e164052">timer_control</a> (<a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a> timer, <a class="el" href="timer__interface_8h.html#a8c9b38f00e59549ec44961259cf5f973">timer_control_t</a> signal)</td></tr>
<tr class="separator:af9ad366bfcfa0fd57f57b3a10e164052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab33b496b3f6a743fc5a34983b163e4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__stm32f411_8c.html#acab33b496b3f6a743fc5a34983b163e4">timer_read</a> (<a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a> timer)</td></tr>
<tr class="separator:acab33b496b3f6a743fc5a34983b163e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2033291e9410536e526d2e0f6c505c8d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__stm32f411_8c.html#a2033291e9410536e526d2e0f6c505c8d">timer_interrupt_control</a> (<a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a> timer, <a class="el" href="timer__stm32f411__config_8h.html#aab4be5010ac4fa3e65d5a6af4a6a692b">timer_interrupt_t</a> interrupt, <a class="el" href="timer__interface_8h.html#a7938ad1c6cd42ca7854633b3a9b2f780">timer_interrupt_control_t</a> signal)</td></tr>
<tr class="separator:a2033291e9410536e526d2e0f6c505c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ab0da8b3f4f700a3ef6180171357eaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__stm32f411_8c.html#a5ab0da8b3f4f700a3ef6180171357eaf">timer_prescaler_set</a> (<a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a> timer, <a class="el" href="timer__stm32f411__config_8h.html#a3b4fca94c6865f09f02ba44fc4a3c067">timer_prescaler_t</a> prescaler)</td></tr>
<tr class="separator:a5ab0da8b3f4f700a3ef6180171357eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d3a8c691d0102896a6bb77cc5e99af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__stm32f411__config_8h.html#a3b4fca94c6865f09f02ba44fc4a3c067">timer_prescaler_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__stm32f411_8c.html#a89d3a8c691d0102896a6bb77cc5e99af">timer_prescaler_get</a> (<a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a> timer)</td></tr>
<tr class="separator:a89d3a8c691d0102896a6bb77cc5e99af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2626875b0c6d119e973e9e6f51246de0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__stm32f411_8c.html#a2626875b0c6d119e973e9e6f51246de0">timer_register_write</a> (uint32_t timer_register, uint32_t value)</td></tr>
<tr class="separator:a2626875b0c6d119e973e9e6f51246de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56c138635e13a17b99b30f9bf7897ab"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__stm32f411_8c.html#ac56c138635e13a17b99b30f9bf7897ab">timer_register_read</a> (uint32_t timer_register)</td></tr>
<tr class="separator:ac56c138635e13a17b99b30f9bf7897ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13a61845be60c77f415b9b75dc3161cf"><td class="memItemLeft" align="right" valign="top"><a id="a13a61845be60c77f415b9b75dc3161cf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>timer_cc_init</b> (<a class="el" href="structtimer__cc__config__t.html">timer_cc_config_t</a> *config_table)</td></tr>
<tr class="separator:a13a61845be60c77f415b9b75dc3161cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa80cfe52f16e2a75a98f16d09a40921a"><td class="memItemLeft" align="right" valign="top"><a id="aa80cfe52f16e2a75a98f16d09a40921a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>timer_cc_control</b> (<a class="el" href="timer__cc__stm32f411__config_8h.html#a0d2d4ad523b47ab027338b08b939191c">timer_cc_t</a> timer_cc, <a class="el" href="timer__interface_8h.html#a8c9b38f00e59549ec44961259cf5f973">timer_control_t</a> signal)</td></tr>
<tr class="separator:aa80cfe52f16e2a75a98f16d09a40921a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2471e672cf49d7fd9c3410964b11e4e1"><td class="memItemLeft" align="right" valign="top"><a id="a2471e672cf49d7fd9c3410964b11e4e1"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>timer_cc_read</b> (<a class="el" href="timer__cc__stm32f411__config_8h.html#a0d2d4ad523b47ab027338b08b939191c">timer_cc_t</a> timer_cc)</td></tr>
<tr class="separator:a2471e672cf49d7fd9c3410964b11e4e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4d47f68508e258761dcd64d91527266"><td class="memItemLeft" align="right" valign="top"><a id="aa4d47f68508e258761dcd64d91527266"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>timer_cc_write</b> (<a class="el" href="timer__cc__stm32f411__config_8h.html#a0d2d4ad523b47ab027338b08b939191c">timer_cc_t</a> timer_cc, uint32_t value)</td></tr>
<tr class="separator:aa4d47f68508e258761dcd64d91527266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2161da0bfaf8291335efc4af62abfbf"><td class="memItemLeft" align="right" valign="top"><a id="af2161da0bfaf8291335efc4af62abfbf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>timer_cc_pwm_duty_cycle_set</b> (<a class="el" href="timer__cc__stm32f411__config_8h.html#a0d2d4ad523b47ab027338b08b939191c">timer_cc_t</a> timer_cc, uint32_t duty_cycle_pcnt)</td></tr>
<tr class="separator:af2161da0bfaf8291335efc4af62abfbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Microcontroller specific implementation of timer functionality. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="af9ad366bfcfa0fd57f57b3a10e164052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ad366bfcfa0fd57f57b3a10e164052">&#9670;&nbsp;</a></span>timer_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_control </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a>&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="timer__interface_8h.html#a8c9b38f00e59549ec44961259cf5f973">timer_control_t</a>&#160;</td>
          <td class="paramname"><em>signal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Description:</b> </p>
<p>This function is used to start or stop the counter.</p>
<p>PRE-CONDITION: The timer has been successfully initiated through <a class="el" href="timer__stm32f411_8c.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init()</a></p>
<p>POST-CONDITION: The timer has started/stop, as per the signal</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer</td><td>refers to any timer present on-chip</td></tr>
    <tr><td class="paramname">signal</td><td>determines whether the timer stops or starts</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><a class="code" href="timer__interface_8h.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init</a>(config);</div><div class="line"><a class="code" href="timer__interface_8h.html#af9ad366bfcfa0fd57f57b3a10e164052">timer_control</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276a355d56fa51f1cbf3b5151d14b278f9e3">TIMER4</a>, <a class="code" href="timer__interface_8h.html#a8c9b38f00e59549ec44961259cf5f973ab64e562a51298f4a9eabc1f74d263217">TIMER_START</a>);</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="timer__stm32f411_8c.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#acab33b496b3f6a743fc5a34983b163e4">timer_read</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#a2033291e9410536e526d2e0f6c505c8d">timer_interrupt_control</a> <br />
<b> - CHANGE HISTORY - </b></dd></dl>
<table align="left" style="width:800px">
<tr>
<td>Date </td><td>Software Version </td><td>Initials </td><td>Description  </td></tr>
</table>
<p><br />
<br />
 </p><hr/>
 
</div>
</div>
<a id="a1e855e5068e026d91c42c5b7fce0b591"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e855e5068e026d91c42c5b7fce0b591">&#9670;&nbsp;</a></span>timer_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtimer__config__t.html">timer_config_t</a> *&#160;</td>
          <td class="paramname"><em>config_table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Description:</b> </p>
<p>This function is used to initialise the timer based on the configuration table defined in the <a class="el" href="timer__stm32f411__config_8c.html" title="Collection of configuration tables used to configure a timer. Config_table is the one you&#39;ll probably...">timer_stm32f411_config.c</a></p>
<p>PRE-CONDITION: Configuration table needs to populated (sizeof &gt; 0) <br />
 PRE-CONDITION (conditional): If using advanced features, the advanced pointer for the appropriate timer must be non-null PRE-CONDITION (conditional): If using external triggers or TI1/TI2 triggers, the gpio pins must me configured with appropriate AF settings PRE-CONDITION (condtional): If using external triggers, the external_trigger pointer in the advanced structure must be non-null PRE-CONDITION: The RCC clocks for all planned timers must be configured and enabled.</p>
<p>POST-CONDITION: The timers are ready for use.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config_table</td><td>is a pointer to the configuration table that contains the initialisation structures for each timer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="structtimer__config__t.html">timer_config_t</a> *timer_config = <a class="code" href="timer__stm32f411__config_8c.html#a85ad761f6ad6a260bfb109bce8f88a21">timer_config_get</a>();</div><div class="line"><a class="code" href="timer__interface_8h.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init</a>(timer_config);</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="timer__stm32f411__config_8h.html#a85ad761f6ad6a260bfb109bce8f88a21">timer_config_get</a> </dd>
<dd>
timer_init_external_mode_1 </dd>
<dd>
timer_init_external_mode_2 </dd>
<dd>
timer_init_slave_mode <br />
<b> - CHANGE HISTORY - </b></dd></dl>
<table align="left" style="width:800px">
<tr>
<td>Date </td><td>Software Version </td><td>Initials </td><td>Description  </td></tr>
</table>
<p><br />
<br />
 </p><hr/>
 
</div>
</div>
<a id="a2033291e9410536e526d2e0f6c505c8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2033291e9410536e526d2e0f6c505c8d">&#9670;&nbsp;</a></span>timer_interrupt_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_interrupt_control </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a>&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="timer__stm32f411__config_8h.html#aab4be5010ac4fa3e65d5a6af4a6a692b">timer_interrupt_t</a>&#160;</td>
          <td class="paramname"><em>interrupt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="timer__interface_8h.html#a7938ad1c6cd42ca7854633b3a9b2f780">timer_interrupt_control_t</a>&#160;</td>
          <td class="paramname"><em>signal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Description:</b> </p><pre class="fragment">Activates or deactivates the selected interrupt
</pre><p>PRE-CONDITION: The timer has been successfully initiated through <a class="el" href="timer__stm32f411_8c.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init()</a> PRE-CONDITION: The requested interrupt is actually available on the selected timer.</p>
<p>POST-CONDITION: The selected interrupt is enabled/disabled</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer</td><td>refers to any timer present on-chip</td></tr>
    <tr><td class="paramname">interrupt</td><td>refers to the selected interrupt type</td></tr>
    <tr><td class="paramname">signal</td><td>decides whether the interrupt is enabled or disabled</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><a class="code" href="timer__interface_8h.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init</a>(config);</div><div class="line"><a class="code" href="timer__interface_8h.html#a2033291e9410536e526d2e0f6c505c8d">timer_interrupt_control</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276a78900d10bb4d349f1403fbd090e66cd6">TIMER1</a>, <a class="code" href="timer__stm32f411__config_8h.html#aab4be5010ac4fa3e65d5a6af4a6a692ba744f72a9abb9a8c6c1f4504d4669239b">UPDATE_INTERRUPT</a>, <a class="code" href="timer__interface_8h.html#a7938ad1c6cd42ca7854633b3a9b2f780ac567eed9f5921433787d75248030d8c6">INTERRUPT_ENABLE</a>);</div><div class="line"><a class="code" href="timer__interface_8h.html#af9ad366bfcfa0fd57f57b3a10e164052">timer_control</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276a78900d10bb4d349f1403fbd090e66cd6">TIMER1</a>, <a class="code" href="timer__interface_8h.html#a8c9b38f00e59549ec44961259cf5f973ab64e562a51298f4a9eabc1f74d263217">TIMER_START</a>);</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="timer__stm32f411_8c.html#af9ad366bfcfa0fd57f57b3a10e164052">timer_control</a> <br />
<b> - CHANGE HISTORY - </b></dd></dl>
<table align="left" style="width:800px">
<tr>
<td>Date </td><td>Software Version </td><td>Initials </td><td>Description  </td></tr>
</table>
<p><br />
<br />
 </p><hr/>
 <p>check for invalid combinations</p>
<p>Only timer 1 has BREAK and COM</p>
<p>Timers 9/10/11 don't have CCs 3 and 4</p>
<p>Timers 10/11 don't have CC2 either</p>
<p>Timers 10 and 11 don't have trigger interrrupts </p>

</div>
</div>
<a id="a89d3a8c691d0102896a6bb77cc5e99af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d3a8c691d0102896a6bb77cc5e99af">&#9670;&nbsp;</a></span>timer_prescaler_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__stm32f411__config_8h.html#a3b4fca94c6865f09f02ba44fc4a3c067">timer_prescaler_t</a> timer_prescaler_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a>&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Description:</b> </p><pre class="fragment">Gets the prescaler value
</pre><p>PRE-CONDITION: The timer has been successfully initiated through <a class="el" href="timer__stm32f411_8c.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init()</a></p>
<p>POST-CONDITION: The timer's current prescaler value (TIMx_PSC) is returned</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer</td><td>refers to any timer present on-chip</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>timer_prescaler_t (uint16_t)</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><a class="code" href="timer__stm32f411__config_8h.html#a3b4fca94c6865f09f02ba44fc4a3c067">timer_prescaler_t</a> curr_prescaler_timer3 = <a class="code" href="timer__interface_8h.html#a89d3a8c691d0102896a6bb77cc5e99af">timer_prescaler_get</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276a2a815be8dbcb2f8c8f9abb53b441b041">TIMER3</a>);</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="timer__stm32f411_8c.html#af9ad366bfcfa0fd57f57b3a10e164052">timer_control</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#a5ab0da8b3f4f700a3ef6180171357eaf">timer_prescaler_set</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#a2033291e9410536e526d2e0f6c505c8d">timer_interrupt_control</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#acab33b496b3f6a743fc5a34983b163e4">timer_read</a> <br />
<b> - CHANGE HISTORY - </b></dd></dl>
<table align="left" style="width:800px">
<tr>
<td>Date </td><td>Software Version </td><td>Initials </td><td>Description  </td></tr>
</table>
<p><br />
<br />
 </p><hr/>
 
</div>
</div>
<a id="a5ab0da8b3f4f700a3ef6180171357eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ab0da8b3f4f700a3ef6180171357eaf">&#9670;&nbsp;</a></span>timer_prescaler_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_prescaler_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a>&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="timer__stm32f411__config_8h.html#a3b4fca94c6865f09f02ba44fc4a3c067">timer_prescaler_t</a>&#160;</td>
          <td class="paramname"><em>prescaler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Description:</b> </p><pre class="fragment">Sets the prescaler value "on the fly"
</pre><p>PRE-CONDITION: The timer has been successfully initiated through <a class="el" href="timer__stm32f411_8c.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init()</a></p>
<p>POST-CONDITION: The timer's clock is divided by the new prescaler</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer</td><td>refers to any timer present on-chip</td></tr>
    <tr><td class="paramname">prescaler</td><td>is a uint16_t value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><span class="comment">//On the fly changes of the prescaler</span></div><div class="line">  <a class="code" href="timer__interface_8h.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init</a>(config);</div><div class="line">  <a class="code" href="timer__interface_8h.html#a5ab0da8b3f4f700a3ef6180171357eaf">timer_prescaler_set</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276a1eb4dba33ef1e1d24efb6b73674bcd8d">TIMER5</a>, 3200);</div><div class="line">  <a class="code" href="timer__interface_8h.html#af9ad366bfcfa0fd57f57b3a10e164052">timer_control</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276a1eb4dba33ef1e1d24efb6b73674bcd8d">TIMER5</a>, <a class="code" href="timer__interface_8h.html#a8c9b38f00e59549ec44961259cf5f973ab64e562a51298f4a9eabc1f74d263217">TIMER_START</a>);</div><div class="line">  <span class="keywordflow">while</span> (<a class="code" href="timer__interface_8h.html#acab33b496b3f6a743fc5a34983b163e4">timer_read</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276a1eb4dba33ef1e1d24efb6b73674bcd8d">TIMER5</a>) &lt; 300);</div><div class="line">  <a class="code" href="timer__interface_8h.html#a5ab0da8b3f4f700a3ef6180171357eaf">timer_prescaler_set</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276a1eb4dba33ef1e1d24efb6b73674bcd8d">TIMER5</a>, 5000);</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="timer__stm32f411_8c.html#af9ad366bfcfa0fd57f57b3a10e164052">timer_control</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#a89d3a8c691d0102896a6bb77cc5e99af">timer_prescaler_get</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#a2033291e9410536e526d2e0f6c505c8d">timer_interrupt_control</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#acab33b496b3f6a743fc5a34983b163e4">timer_read</a> <br />
<b> - CHANGE HISTORY - </b></dd></dl>
<table align="left" style="width:800px">
<tr>
<td>Date </td><td>Software Version </td><td>Initials </td><td>Description  </td></tr>
</table>
<p><br />
<br />
 </p><hr/>
 
</div>
</div>
<a id="acab33b496b3f6a743fc5a34983b163e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acab33b496b3f6a743fc5a34983b163e4">&#9670;&nbsp;</a></span>timer_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t timer_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276">timer_t</a>&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Description:</b> </p>
<p>This function returns the contents of a timer's CNT register</p>
<p><b>Note:</b> Technically the function works without starting the timer, but that's useless</p>
<p>PRE-CONDITION: The timer has been successfully initiated through <a class="el" href="timer__stm32f411_8c.html#a1e855e5068e026d91c42c5b7fce0b591">timer_init()</a></p>
<p>POST-CONDITION: The function has returned the current contents of CNT</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer</td><td>refers to any timer present on-chip</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line">uint32_t curr_value = <a class="code" href="timer__interface_8h.html#acab33b496b3f6a743fc5a34983b163e4">timer_read</a>(<a class="code" href="timer__stm32f411__config_8h.html#a764f517e2e45ad48bcd8b88590ab5276ad4859fa845445275044f4a52514914f7">TIMER9</a>);</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="timer__stm32f411_8c.html#af9ad366bfcfa0fd57f57b3a10e164052">timer_control</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#a2033291e9410536e526d2e0f6c505c8d">timer_interrupt_control</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#a5ab0da8b3f4f700a3ef6180171357eaf">timer_prescaler_set</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#a89d3a8c691d0102896a6bb77cc5e99af">timer_prescaler_get</a> <br />
<b> - CHANGE HISTORY - </b></dd></dl>
<table align="left" style="width:800px">
<tr>
<td>Date </td><td>Software Version </td><td>Initials </td><td>Description  </td></tr>
</table>
<p><br />
<br />
 </p><hr/>
 
</div>
</div>
<a id="ac56c138635e13a17b99b30f9bf7897ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac56c138635e13a17b99b30f9bf7897ab">&#9670;&nbsp;</a></span>timer_register_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t timer_register_read </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timer_register</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Description:</b> </p><pre class="fragment">Read the current value of the register in timer address. It is the
user's own responisibility to consult the RM0383 to ensure that no reserved bits are
overwritten, etc.
Intended to be used alongside timer_register_write() to create composite advanced user functions
</pre><p>PRE-CONDITION: The address does in fact lie in the address space of any timer.</p>
<p>POST-CONDITION: The register's current contents are returned</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_register</td><td>is a uint32_t which is cast as a 32bit address</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t timer_register's contents</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line">uint32_t dier_timer3 = <a class="code" href="timer__interface_8h.html#ac56c138635e13a17b99b30f9bf7897ab">timer_register_read</a>(TIM3_BASE + 0x0C); <span class="comment">//get current value</span></div><div class="line">dier_timer3 &amp;= ~(0x01UL &lt;&lt; TIM_DIER_CC3DE_Pos); <span class="comment">//clear the DMA request on CC3 bit</span></div><div class="line"><a class="code" href="timer__interface_8h.html#a2626875b0c6d119e973e9e6f51246de0">timer_register_write</a>(TIM3_BASE + 0x0C, dier_timer3);</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="timer__stm32f411_8c.html#a2626875b0c6d119e973e9e6f51246de0">timer_register_write</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#acab33b496b3f6a743fc5a34983b163e4">timer_read</a> <br />
<b> - CHANGE HISTORY - </b></dd></dl>
<table align="left" style="width:800px">
<tr>
<td>Date </td><td>Software Version </td><td>Initials </td><td>Description  </td></tr>
</table>
<p><br />
<br />
 </p><hr/>
 
</div>
</div>
<a id="a2626875b0c6d119e973e9e6f51246de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2626875b0c6d119e973e9e6f51246de0">&#9670;&nbsp;</a></span>timer_register_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer_register_write </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timer_register</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Description:</b> </p><pre class="fragment">Writes the desired value into the desired timer address space register. It is the
user's own responisibility to consult the RM0383 to ensure that no reserved bits are
overwritten, etc.
Intended to be used alongside timer_register_read() to create composite advanced user functions
</pre><p>PRE-CONDITION: The address does in fact lie in the address space of any timer.</p>
<p>POST-CONDITION: The desired register's contents now reflect "value"</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_register</td><td>is a uint32_t which is cast as a 32bit address</td></tr>
    <tr><td class="paramname">value</td><td>is an (up to) uint32_t value which is written to the desired register</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line">uint32_t dier_timer3 = <a class="code" href="timer__interface_8h.html#ac56c138635e13a17b99b30f9bf7897ab">timer_register_read</a>(TIM3_BASE + 0x0C); <span class="comment">//get current value</span></div><div class="line">dier_timer3 &amp;= ~(0x01UL &lt;&lt; TIM_DIER_CC3DE_Pos); <span class="comment">//clear the DMA request on CC3 bit</span></div><div class="line"><a class="code" href="timer__interface_8h.html#a2626875b0c6d119e973e9e6f51246de0">timer_register_write</a>(TIM3_BASE + 0x0C, dier_timer3);</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="timer__stm32f411_8c.html#ac56c138635e13a17b99b30f9bf7897ab">timer_register_read</a> </dd>
<dd>
<a class="el" href="timer__stm32f411_8c.html#acab33b496b3f6a743fc5a34983b163e4">timer_read</a> <br />
<b> - CHANGE HISTORY - </b></dd></dl>
<table align="left" style="width:800px">
<tr>
<td>Date </td><td>Software Version </td><td>Initials </td><td>Description  </td></tr>
</table>
<p><br />
<br />
 </p><hr/>
 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="timer__stm32f411_8c.html">timer_stm32f411.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
